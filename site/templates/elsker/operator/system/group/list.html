<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>管理后台</title>
<link href="../../../../css/style.css" rel="stylesheet" type="text/css">
<link href="../../../../css/box.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../../../js/jquery.js"></script>
<script type="text/javascript" src="../../../../js/common.js"></script>
<script type="text/javascript" src="../../../../js/box.js"></script>
</head>
<body>
<div class="so_main">
  <div class="page_tit">系统权限</div>
  <!-------- 用户列表 -------->
  <div class="Toolbar_inbox">
  	<div class="page right">共{$total}条记录&nbsp;&nbsp;&nbsp;{$PAGINATION}</div>
	<a href="create.php" class="btn_a"><span>添加组</span></a>
	<a href="javascript:void(0);" class="btn_a" onclick="deleteGroup();"><span>删除组</span></a>
  </div>
  <div class="list">
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <th style="width:30px;">
		<input type="checkbox" id="checkbox_handle" onclick="checkAll(this)" value="0">
    	<label for="checkbox"></label>
	</th>
	<th class="line_l">ID</th>
    <th class="line_l">名称</th>
    <th class="line_l">操作</th>
  </tr>
  {foreach from=$groupList key=i item=row}
  <tr overstyle='on' id="admin_group_{$row.admin_menu_id}">
	  	<td><input type="checkbox" name="checkbox" id="checkbox{$row.admin_group_id}" value="{$row.admin_group_id}"></td>
		<td>{$row.admin_group_id}</td>
	  	<td>{$row.title}</td>
	    <td>
			<a href="modify.php?uid={$row.admin_group_id}">编辑</a>
			<a href="{literal}javascript:if(confirm('是否确定删除？')){window.location.href='delete.php?uid={/literal}{$row.admin_group_id}';{literal}}{/literal}">删除</a>
		</td>
 </tr>
 {/foreach}
 </table>
 </div>

  <div class="Toolbar_inbox">
	<div class="page right">共{$total}条记录&nbsp;&nbsp;&nbsp;{$PAGINATION}</div>
	<a href="create.php" class="btn_a"><span>添加组</span></a>
	<a href="javascript:void(0);" class="btn_a" onclick="deleteGroup();"><span>删除组</span></a>
  </div>
</div>
<!-{literal}->
<script>
	//鼠标移动表格效果
	$(document).ready(function(){
		$("tr[overstyle='on']").hover(
		  function () {
		    $(this).addClass("bg_hover");
		  },
		  function () {
		    $(this).removeClass("bg_hover");
		  }
		);
	});
	
	function checkon(o){
		if( o.checked == true ){
			$(o).parents('tr').addClass('bg_on') ;
		}else{
			$(o).parents('tr').removeClass('bg_on') ;
		}
	}
	
	function checkAll(o){
		if( o.checked == true ){
			$('input[name="checkbox"]').attr('checked','true');
			$('tr[overstyle="on"]').addClass("bg_on");
		}else{
			$('input[name="checkbox"]').removeAttr('checked');
			$('tr[overstyle="on"]').removeClass("bg_on");
		}
	}

	//获取已选择用户的ID数组
	function getChecked() {
		var uids = new Array();
		$.each($('table input:checked'), function(i, n){
			uids.push( $(n).val() );
		});
		return uids;
	}
	
	//删除用户
	function deleteGroup(uid) {
		uid = uid ? uid : getChecked();
		uid = uid.toString();
		if(uid == '' || !confirm('删除成功后将无法恢复，确认继续？')) return false;
		
		$.post("delete.php?multi=1", {uid:uid}, function(res){
			if(res == '1') {
				uid = uid.split(',');
				for(i = 0; i < uid.length; i++) {
					$('#admin_group_'+uid[i]).remove();
				}
				ui.success('操作成功');
			}else {
				ui.error('操作失败');
			}
		});
	}
	
	function folder(type, _this) {
		$('#search_'+type).slideToggle('fast');
		if ($(_this).html() == '展开') {
			$(_this).html('收起');
		}else {
			$(_this).html('展开');
		}
		
	}
</script>
<!-{/literal}->

</body>
</html>