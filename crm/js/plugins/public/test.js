var list = [
    // {
    //     id: '01',
    //     carNum: "苏D1",
    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-24 03:40:30", to: "2019-11-25 00:50:30" },
    //         zhouer: { from: "2019-11-25 05:40:30", to: "2019-11-26 05:50:30" },
    //         zhousan: { from: "2019-11-26 21:40:30", to: "2019-11-27 03:50:30" },
    //         zhousi: { from: "2019-11-27 06:40:30", to: "2019-11-28 05:50:30" },
    //         zhouwu: { from: "2019-11-28 08:40:30", to: "2019-11-29 10:50:30" },
    //         zhouliu: { from: "2019-11-29 13:40:30", to: "2019-11-30 10:50:30" },
    //         zhouri: { from: "2019-11-30 18:40:30", to: "2019-11-31 17:50:30" },
    //     }
    // },
    // {
    //     id: '02',
    //     carNum: "苏D2",
    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-24 03:40:30", to: "2019-11-25 00:50:30" },
    //         zhouer: { from: "2019-11-25 05:40:30", to: "2019-11-26 05:50:30" },
    //         zhousan: { from: "2019-11-26 21:40:30", to: "2019-11-27 03:50:30" },
    //         zhousi: { from: "2019-11-27 06:40:30", to: "2019-11-28 05:50:30" },
    //         zhouwu: { from: "2019-11-28 08:40:30", to: "2019-11-29 10:50:30" },
    //         zhouliu: { from: "2019-11-29 13:40:30", to: "2019-11-30 10:50:30" },
    //         zhouri: { from: "2019-11-30 18:40:30", to: "2019-11-31 17:50:30" },
    //     }
    // },
    // {
    //     id: '03',
    //     carNum: "苏03",
    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-20 3:40", to: "2019-11-21 0:50" },
    //         zhouer: { from: "2019-11-22 5:40", to: "2019-11-23 5:50" },
    //         zhousan: { from: "2019-11-23 21:40", to: "2019-11-24 3:50" },
    //         zhousi: { from: "2019-11-24 6:40", to: "2019-11-25 5:50" },
    //         zhouwu: { from: "2019-11-25 8:40", to: "2019-11-26 10:50" },
    //         zhouliu: { from: "2019-11-26 13:40", to: "2019-11-27 10:50" },
    //         zhouri: { from: "2019-11-27 18:40", to: "2019-11-30 17:50" },
    //     }
    // },
    // {
    //     id: '04',
    //     carNum: "苏D4",

    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-24 03:40:30", to: "2019-11-25 00:50:30" },
    //         zhouer: { from: "2019-11-25 05:40:30", to: "2019-11-26 05:50:30" },
    //         zhousan: { from: "2019-11-26 21:40:30", to: "2019-11-27 03:50:30" },
    //         zhousi: { from: "2019-11-27 06:40:30", to: "2019-11-28 05:50:30" },
    //         zhouwu: { from: "2019-11-28 08:40:30", to: "2019-11-29 10:50:30" },
    //         zhouliu: { from: "2019-11-29 13:40:30", to: "2019-11-30 10:50:30" },
    //         zhouri: { from: "2019-11-30 18:40:30", to: "2019-11-31 17:50:30" },
    //     }
    // },
    // {
    //     id: '05',
    //     carNum: "苏D5",
    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-24 03:40:30", to: "2019-11-25 00:50:30" },
    //         zhouer: { from: "2019-11-25 05:40:30", to: "2019-11-26 05:50:30" },
    //         zhousan: { from: "2019-11-26 21:40:30", to: "2019-11-27 03:50:30" },
    //         zhousi: { from: "2019-11-27 06:40:30", to: "2019-11-28 05:50:30" },
    //         zhouwu: { from: "2019-11-28 08:40:30", to: "2019-11-29 10:50:30" },
    //         zhouliu: { from: "2019-11-29 13:40:30", to: "2019-11-30 10:50:30" },
    //         zhouri: { from: "2019-11-30 18:40:30", to: "2019-11-31 17:50:30" },
    //     }
    // },
    // {
    //     id: '06',
    //     carNum: "苏D5",
    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-24 03:40:30", to: "2019-11-25 00:50:30" },
    //         zhouer: { from: "2019-11-25 05:40:30", to: "2019-11-26 05:50:30" },
    //         zhousan: { from: "2019-11-26 21:40:30", to: "2019-11-27 03:50:30" },
    //         zhousi: { from: "2019-11-27 06:40:30", to: "2019-11-28 05:50:30" },
    //         zhouwu: { from: "2019-11-28 08:40:30", to: "2019-11-29 10:50:30" },
    //         zhouliu: { from: "2019-11-29 13:40:30", to: "2019-11-30 10:50:30" },
    //         zhouri: { from: "2019-11-30 18:40:30", to: "2019-11-31 17:50:30" },
    //     }
    // },
    // {
    //     id: '07',
    //     carNum: "苏D5",
    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-24 03:40:30", to: "2019-11-25 00:50:30" },
    //         zhouer: { from: "2019-11-25 05:40:30", to: "2019-11-26 05:50:30" },
    //         zhousan: { from: "2019-11-26 21:40:30", to: "2019-11-27 03:50:30" },
    //         zhousi: { from: "2019-11-27 06:40:30", to: "2019-11-28 05:50:30" },
    //         zhouwu: { from: "2019-11-28 08:40:30", to: "2019-11-29 10:50:30" },
    //         zhouliu: { from: "2019-11-29 13:40:30", to: "2019-11-30 10:50:30" },
    //         zhouri: { from: "2019-11-30 18:40:30", to: "2019-11-31 17:50:30" },
    //     }
    // },
    // {
    //     id: '08',
    //     carNum: "苏D5",
    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-24 03:40:30", to: "2019-11-25 00:50:30" },
    //         zhouer: { from: "2019-11-25 05:40:30", to: "2019-11-26 05:50:30" },
    //         zhousan: { from: "2019-11-26 21:40:30", to: "2019-11-27 03:50:30" },
    //         zhousi: { from: "2019-11-27 06:40:30", to: "2019-11-28 05:50:30" },
    //         zhouwu: { from: "2019-11-28 08:40:30", to: "2019-11-29 10:50:30" },
    //         zhouliu: { from: "2019-11-29 13:40:30", to: "2019-11-30 10:50:30" },
    //         zhouri: { from: "2019-11-30 18:40:30", to: "2019-11-31 17:50:30" },
    //     }
    // },
    // {
    //     id: '09',
    //     carNum: "苏D5",
    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-24 03:40:30", to: "2019-11-25 00:50:30" },
    //         zhouer: { from: "2019-11-25 05:40:30", to: "2019-11-26 05:50:30" },
    //         zhousan: { from: "2019-11-26 21:40:30", to: "2019-11-27 03:50:30" },
    //         zhousi: { from: "2019-11-27 06:40:30", to: "2019-11-28 05:50:30" },
    //         zhouwu: { from: "2019-11-28 08:40:30", to: "2019-11-29 10:50:30" },
    //         zhouliu: { from: "2019-11-29 13:40:30", to: "2019-11-30 10:50:30" },
    //         zhouri: { from: "2019-11-30 18:40:30", to: "2019-11-31 17:50:30" },
    //     }
    // },
    // {
    //     id: '10',
    //     carNum: "苏D5",
    //     content: '租车',
    //     time: {
    //         zhouyi: { from: "2019-11-24 03:40:30", to: "2019-11-25 00:50:30" },
    //         zhouer: { from: "2019-11-25 05:40:30", to: "2019-11-26 05:50:30" },
    //         zhousan: { from: "2019-11-26 21:40:30", to: "2019-11-27 03:50:30" },
    //         zhousi: { from: "2019-11-27 06:40:30", to: "2019-11-28 05:50:30" },
    //         zhouwu: { from: "2019-11-28 08:40:30", to: "2019-11-29 10:50:30" },
    //         zhouliu: { from: "2019-11-29 13:40:30", to: "2019-11-30 10:50:30" },
    //         zhouri: { from: "2019-11-30 18:40:30", to: "2019-11-31 17:50:30" },
    //     }
    // },


]
function createdTable() {
    var html = ""
    $.each(list, function (i, item) {
        var tdDay = {
            tdDate1: $("#calendarBox").children().eq(0).attr("data-Date"),

        };
        html += '<tr>' +
            '<th width="10%">' + item.carNum + '</th>' +
            '<td   width="90%" class="tdfirst td' + tdDay.tdDate1 + item.id + '" day=' + tdDay.tdDate1 + '>' + tdDay.tdDate1 + '</td>' +
            '</tr>';

    })

    $("#carDetails").html('<table witdh="100%">' + html + "</table>")
}
function gettnTable() {
    // alert(1)
    tdDay = {
        tdDate1: $("#calendarBox").children().eq(0).attr("data-Date"),
        tdYear: $("#calendarBox").children().eq(0).attr("data-year"),
        tdMonth: $("#calendarBox").children().eq(0).attr("data-month"),
    };
    // console.log(list.time.abc1.from)
    var html = ""
    $.each(list, function (i, item) {
        var carNum = item.carNum;
        var obj1 = item.time
        // console.log(obj1)
        var arr1 = obj1.split("||")
        // console.log(arr1)
        arr1 = arr1.pop();
        $.each(arr1, function (i, item) {
            // console.log(1234)
            // alert(3)
            // console.log(item)
            var str = item.split(",to:")
            // console.log(str)
            var a = str[0]
            var a1 = a.split(":{form:")
            var aTitle = a1[0]
            var aFrom = a1[1]
            // console.log(aFrom)
            var bbb = str[1]
            var aTo = bbb.substr(0, bbb.length - 1)
            // console.log(aTo)
            var time_s = moment(aFrom)
            var time_e = moment(aTo)    //结束时间
            td_s = new Date(tdDay.tdYear, tdDay.tdMonth - 1, tdDay.tdDate1)
            td_s = moment(td_s)
            // console.log(td_s)
            var w = (((time_e - time_s) / (1000 * 60 * 60 * 24)) / 7 * 100).toFixed(2) + "%"
            var left_w = (((time_s - td_s) / (1000 * 60 * 60 * 24)) / 7 * 100).toFixed(2) + "%"
            // console.log("W" + w)
            // console.log("ccc" + left_w)
            // console.log("left_w         " + left_w)
            html += '<span style="z-index:9;top:22px;left:' + left_w + ';width:' + w + ';height:24px;background-color:#7cb5ec ;border-radius: 3px;"><div class="car_content"><p>车牌号：' + carNum + '<br/>租车开始时间：' + item.from + '<br/>租车结束时间：' + item.to + '</p ></div></span>'
        })
        var className = ".td" + tdDay.tdDate1 + item.id
        $(className).html(html)
        html = ""


    })
}

function ajaxLonding() {
    var url = 'index.php?task=getCartime';
    var params = ""
    $.post(url, params, function (d) {
        // console.log(d);
        var html = "";
        var abc1 = ""
        var abc = ""
        var time = []
        var arr = []

        $.each(d.car_list, function (i, v) {
            // console.log(v)
            var abc = {}
            $.each(v, function (i, vr) {
                console.log("123456"+vr)
            $.each(v.time, function (i, item) {
                console.log("1adsfgfdas"+item)
                var abc1 = {}
                d = {}
                var cc = i;
                if (item !== null) {
                    $.each(item, function (i, item) {
                        // console.log(item)
                        // d = "{" + item.paiche_startDate + "," + item.paiche_endDate + "}"
                        s = item.paiche_startDate,
                            e = item.paiche_endDate,
                            d = {
                                cc, s, e
                            }
                    })
                    abc.cc = d
                }
                console.log(abc)
                arr.push(abc)
                console.log(arr)
                // lis = {
                //     id: v.car_id,
                //     carNum: "苏D" + v.car_num,
                //     time: arr
                // }
                // console.log(lis)

            })
        })


            // // console.log(v)
            // $.each(v.time, function (i, item) {
            //     var abc = ""
            //     var lis=""
            //     if (item !== null) {
            //         var c = i
            //         var abc = ""
            //         $.each(item, function (i, item) {
            //             abc = c + ":{form:" + item.paiche_startDate + ",to:" + item.paiche_endDate + "}||"
            //         })
            //         abc1 += (abc)
            //     }
            //     var tims = JSON.stringify(abc1)
            //     var str1 = JSON.parse(tims);
            //      
            //     }
            //     list.push(lis)
            // })

            // console.log(list)

            // // console.log("1234567"+list)
            // createdTable()
            // gettnTable()
        })
    }, 'json')

}
ajaxLonding()







































// $(function(){
//     var pageNum = 1
//     $(window).mousewheel(function(event,dat){

//         var t=$(window).scrollTop()
//         console.log(t)
//         if(dat==-1 && t<=50)
//         {
//            pageNum++

//            ajaxLonding()

//         }
//         else
//         {

//         //    alert(2)
//         }
//     })
// })